Rails基础
============

Rails用一个命令就可以生成一个可用的rails应用。

    $ rails new hello-world

这个应用可以这样运行。

    $ cd hello-world
    hello-world$ rails s

    => Booting WEBrick
    => Rails 3.1.0 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    [2011-12-07 16:29:35] INFO  WEBrick 1.3.1
    [2011-12-07 16:29:35] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin11.2.0]
    [2011-12-07 16:29:35] INFO  WEBrick::HTTPServer#start: pid=20070 port=3000

访问[localhost:3000](http://localhost:3000)来查看你的rails应用。

你可以运行命令`rails c`来打开rails console.

这很简单。首先，现在让我们来建造一个可以简单伺候静态页面的Rails应用

Bundler
-------

可以用以下的内容创建一个*Gemfile*。

``` ruby
source "http://rubygems.org"

gem "rails", "3.1"
```

安装gems.

    $ bundle install
    Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.

    $ rails --version
    Rails 3.1.0

启动
----

在*config/boot.rb*里，我们只需要设置bundler来启动我们的gems。

``` ruby
# require rubygems that knows how to load gems
require 'rubygems'

# require bundler, which in turn will load all the gems
require 'bundler/setup'
```

应用
-----------

一个应用被声明在*config/application.rb*中。

``` ruby
# load libraries required on boot
require File.expand_path('../boot', __FILE__)

# the action controller that serves requests
require "action_controller/railtie"

# libraries required for the application to run
# include :default and current environment libraries
Bundler.require :default, Rails.env

# application itself
module HelloWorld
  class Application < Rails::Application
    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"
  end
end
```

环境
-----------

初始化这个应用所有的环境变量存放在*config/environment.rb*。

``` ruby
require File.expand_path('../application', __FILE__)

HelloWorld::Application.initialize!
```

Config.ru
---------

Rails使用Rack作为基本的HTTP处理。

Config.ru是一个我们指示如何运行基于Rack的应用程序的习惯用法，这样的应用也被称为*rack-up*。

``` ruby
require ::File.expand_path('../config/environment',  __FILE__)

run HelloWorld::Application
```


对`File.expand_path('../config/environment',  __FILE__)`的调用会计算出`config/environment`的绝对路径，这使得Rails应用可以在任何路径下运行。

Script/rails
------------

当你在命令行输入`rails`时，Script/rails自动运行。它会加载`config/application.rb` 和 `config/boot.rb`。

``` ruby
#!/usr/bin/env ruby

APP_PATH = File.expand_path('../../config/application',  __FILE__)

require File.expand_path('../../config/boot',  __FILE__)
require 'rails/commands'
```

Cryptographic Token
-------------------

想要加密session数据，需要一个密标(secret token)，加到*config/initializers/secret_token.rb*里面。

``` ruby
HelloWorld::Application.config.secret_token = "why did the chicken cross the road?"
```

静态HTML页面
----------------

在*public/index.html*加入一些基本的HTML内容。

运行这个应用程序
-------------------

    $ rails s

访问http://localhost:3000 来显示index.html的内容.

加载顺序
-------------

    $ rails s

    Loading script/rails
    Loading config/boot.rb
    Loading rails/commands
    Loading application.rb
    => Booting WEBrick
    => Rails 3.1.0 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    Loading config.ru
    Loading config/environment.rb
    HelloWorld::Application.initialize!
    Loading config/routes.rb
    Running HelloWorld::Application
    [2011-12-07 17:24:35] INFO  WEBrick 1.3.1
    [2011-12-07 17:24:35] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin11.2.0]
    [2011-12-07 17:24:35] INFO  WEBrick::HTTPServer#start: pid=20322 port=3000

Next
====

Lets look at a [Rails MVC application](4.2-rails-mvc-scaffold.md).

