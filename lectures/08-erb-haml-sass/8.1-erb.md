ERB
===

[ERB](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html) 代表的意思是*Embedded Ruby*. 这是一个Ruby的模板系统。

文件扩展
---------------

`html.erb`或者`erb.html`文件扩展代表着你可以混合HTML，ERB和纯Ruby代码在同一个文件里面有一些项目可能使用`.rhtml`的后缀。
		
运算ERB
--------------

ERB只是一个Ruby模块，所以你可以在Ruby代码运算ERB。为了运算Ruby，需要在把ERB字符串放在`<% %>`内部。想要输出一个值，需要使用`<%= %>`。可以用`<%# .. %>`来进行注释。

``` ruby
require 'erb'

s = "Ruby String"
e = ERB.new "<%= s %>"

e.result # "Ruby String"
```

在Ruby里，字符串可以用多行来定义，使用`<<-`或者`%q`就可以了。

``` erb
<%# prints ERB is a Class %>
ERB is a <%= ERB.class.name %>
<%# prints value of string %>
String is <%= s %>
```

Ruby代码内部的ERB模板可以迭代一个数组。

``` ruby
animals = {
  "cow" => "moo",
  "cat" => "meow"
}

t = %q{

  The animals at the zoo:

  <% animals.each_pair do |animal, sound| %>
    * <%= animal %> says <%= sound %>
  <% end %>
}

ERB.new(t).result
```

绑定
-------

`ERB.result`可以用一个可选的绑定来提供对本地变量的访问。这是在ERB视图里访问从控制器里获得本地变量的方法。

``` ruby
require 'erb'

class Hound
  def initialize
    @sound = "bow wow"
  end
  def public_binding
    binding
  end
end

t = %q{
  The dog says: <%= @sound %>
}

dog = Hound.new

ERB.new(t).result(dog.public_binding) # The dog says: bow wow
```

