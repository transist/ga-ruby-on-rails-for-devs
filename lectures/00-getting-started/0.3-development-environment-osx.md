开始捯饬Mac OSX
==========================

以下的说明很大程度上受[这里](http://help.github.com/mac-set-up-git/).

安装Ssh
-----------

OSX原生就带有一个SSH客户端。所以就只生成一对public/private key pair.

    $ ssh-keygen
    Generating public/private rsa key pair.
    Enter file in which to save the key (/home/username/.ssh/id_rsa):
    Your identification has been saved in /home/username/.ssh/id_rsa.
    Your public key has been saved in /home/username/.ssh/id_rsa.pub.

上传public key(contents of ` ~/.ssh/id_rsa.pub`)到Github的[Account Settings, SSH Public Keys](https://github.com/account). 如果你有任何问题，请参考[troubleshooting ssh issues](http://help.github.com/troubleshooting-ssh/)

你现在应该就可以连接Github了。

    $ ssh -T git@github.com
    Hi username! You've successfully authenticated, but GitHub does not provide shell access.

安装Git
-----------

安装[Git](http://git-scm.com/download).

配置你的username和email。

    git config --global user.name "Firstname Lastname"
    git config --global user.email "your_email@youremail.com"

Build Essentials
----------------

从[http://developer.apple.com/xcode/](http://developer.apple.com/xcode/)安装. 如果你有更老的版本, 比如 [4.1](https://developer.apple.com/downloads/download.action?path=Developer_Tools/xcode_4.1_for_lion/xcode_4.1_for_lion.dmg), 就这么着，别动了.

安装 Ruby 和 RVM
-------------------

RVM的意思是Ruby Version Manger，可以让你管理多个版本的Ruby开发环境。这对一些需要更老版本的Ruby或者其他的核心库的项目很有用。它也提供了一个简单的方式来保存你的环境设置，以防被破坏环境或者错误的升级。

安装 [RVM](http://rvm.beginrescueend.com/).

    bash < <(curl -s https://rvm.beginrescueend.com/install/rvm)

设置RVM path 并且把初始化命令加入 `.bash_profile`

    export PATH=$PATH:/usr/local/rvm/bin
    [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"

打开一个新的shell窗口来测试RVM。以下的语句应该会返回 `rvm is a function`.

    $ type rvm | head -1 # numeral one
    rvm is a function

在OSX中，把默认的C compiler切换到GCC.

    export CC="/usr/bin/gcc-4.2" 
    export ARCHFLAGS="-arch x86_64"
    export ARCHS="x86_64"

如果GCC没用或者你在编译Ruby时有错误，重新从[这里](https://github.com/kennethreitz/osx-gcc-installer)安装GCC。
	
安装Ruby 1.9.2, RubyGems, Rails,并且设置一个gemset.

    rvm install 1.9.2
    rvm --default 1.9.2

测试Ruby
---------

    ruby -e "puts :Hello"

安装Homebrew
----------------

Homebrew是一个安装包管理器，我们会用它来安装一些部件，我们强烈推荐使用它，比MacPorts还推荐。

    ruby -e "$(/usr/bin/curl -fksSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)"

有任何的问题，参考[安装指南](https://github.com/mxcl/homebrew/wiki/installation)。

PostgreSQL
----------

我们会在Rails应用中使用PostgreSQL。使用homebrew来运行以下的命令。

    $ brew update
    $ brew install postgresql

完成之前, 你会看到一系列的指南，跟着这些指南来做会显示以下内容：

    If this is your first install, create a database with:
    $ initdb /usr/local/var/postgres

.

    If this is your first install, automatically load on login with:
    $ mkdir -p ~/Library/LaunchAgents
    $ cp /usr/local/Cellar/postgresql/9.1.2/org.postgresql.postgres.plist ~/Library/LaunchAgents/
    $ launchctl load -w ~/Library/LaunchAgents/org.postgresql.postgres.plist

你现在会有一个postgresql数据库在已经安装并且在运行。数据库的密码是一个空字符串（把密码栏留空），用户名应该是你的命令行的`username`，你可以运行以下的命令来查看用户名：

    $ whoami

还有一点需要确认，只有本地用户才可以连接postgres instance。因为你的命令行认证已经可以进行到postgresql，用户名和密码信息将不再需要存放在Rails的`database.yml`文件中（更多内容稍后再介绍）。

以后想要显示查看这些步骤，只需要运行以下的命令：

    $ brew info postgresql

[pgAdmin](http://www.pgadmin.org/download/macosx.php) 是的postgresql的管理变得容易，推荐给postgres新手使用。
