Rack 基础
===========

目 标
---------

理解Rack, Rails必不可少的一个构件。

Rack
----

Rack提供一个在Ruby下具有最小化、模块化和可适配的接口来开发网络应用。
它包含了基本的request， response， cookies 和 sessions的实现。和一些有用的中间件。

Bundler
-------

Bundler是一个安装包管理器，把应用或者库沙盒化。库被称为*gems*。

创建一个*Gemfile*需要Rack和Mongrel， 一个web服务器。

``` ruby
source "http://rubygems.org"

gem "rack", "1.3.5"
gem "mongrel", "1.2.0.pre2"
```

Install bundler with RubyGem.

    $ gem install bundler

Install gems.

    $ bundle install
    Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.

Server
------

一个简单的Rack服务器返回简单的HTTP请求。方法call会带有一个参数，在这个环境下包含了带有HTTP请求的信息。从call方法返回的回应必须由有三个元素的数组组成：一个HTTP返回代码，headers和一组body部分。

``` ruby
require 'rubygems'
require 'rack'

class HelloWorld
  def call(env)
    [200, {"Content-Type" => "text/html"}, ["Hello Rack!"]]
  end
end

Rack::Handler::Mongrel.run HelloWorld.new, :Port => 9292 # Remember the uppercase 'P'
```

这段代码可以用ruby来运行

    $ ruby server.rb

导航到 [localhost:9292](http://localhost:9292/).

练 习
--------

在Rack的基础上构建一个基础的web应用，是的可以简单的从本地文件系统的子目录下伺候HTML文件.

